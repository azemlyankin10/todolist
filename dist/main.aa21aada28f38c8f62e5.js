(()=>{"use strict";function t(t,e){var n=function(t){for(var e=t.split(/([.#])/),n="",i="",o=1;o<e.length;o+=2)switch(e[o]){case".":n+=" "+e[o+1];break;case"#":i=e[o+1]}return{className:n.trim(),tag:e[0]||"div",id:i}}(t),i=n.tag,o=n.id,r=n.className,l=e?document.createElementNS(e,i):document.createElement(i);return o&&(l.id=o),r&&(e?l.setAttribute("class",r):l.className=r),l}function e(t,e){var i=m(t),o=m(e);return e===o&&o.__redom_view&&(e=o.__redom_view),o.parentNode&&(n(e,o,i),i.removeChild(o)),e}function n(t,e,n){var o=e.__redom_lifecycle;if(i(o))e.__redom_lifecycle={};else{var r=n;for(e.__redom_mounted&&a(e,"onunmount");r;){var l=r.__redom_lifecycle||{};for(var s in o)l[s]&&(l[s]-=o[s]);i(l)&&(r.__redom_lifecycle=null),r=r.parentNode}}}function i(t){if(null==t)return!0;for(var e in t)if(t[e])return!1;return!0}var o=["onmount","onremount","onunmount"],r="undefined"!=typeof window&&"ShadowRoot"in window;function l(t,e,i,l){var s=m(t),u=m(e);e===u&&u.__redom_view&&(e=u.__redom_view),e!==u&&(u.__redom_view=e);var c=u.__redom_mounted,f=u.parentNode;if(c&&f!==s&&n(0,u,f),null!=i)if(l){var d=m(i);d.__redom_mounted&&a(d,"onunmount"),s.replaceChild(u,d)}else s.insertBefore(u,m(i));else s.appendChild(u);return function(t,e,n,i){for(var l=e.__redom_lifecycle||(e.__redom_lifecycle={}),s=n===i,u=!1,c=0,f=o;c<f.length;c+=1){var d=f[c];s||t!==e&&d in t&&(l[d]=(l[d]||0)+1),l[d]&&(u=!0)}if(!u)return void(e.__redom_lifecycle={});var v=n,h=!1;(s||v&&v.__redom_mounted)&&(a(e,s?"onremount":"onmount"),h=!0);for(;v;){var p=v.parentNode,m=v.__redom_lifecycle||(v.__redom_lifecycle={});for(var _ in l)m[_]=(m[_]||0)+l[_];if(h)break;(v.nodeType===Node.DOCUMENT_NODE||r&&v instanceof ShadowRoot||p&&p.__redom_mounted)&&(a(v,s?"onremount":"onmount"),h=!0),v=p}}(e,u,s,f),e}function a(t,e){"onmount"===e||"onremount"===e?t.__redom_mounted=!0:"onunmount"===e&&(t.__redom_mounted=!1);var n=t.__redom_lifecycle;if(n){var i=t.__redom_view,o=0;for(var r in i&&i[e]&&i[e](),n)r&&o++;if(o)for(var l=t.firstChild;l;){var s=l.nextSibling;a(l,e),l=s}}}function s(t,e,n){t.style[e]=null==n?"":n}var u="http://www.w3.org/1999/xlink";function c(t,e,n,i){var o=m(t);if("object"==typeof e)for(var r in e)c(o,r,e[r],i);else{var l=o instanceof SVGElement,a="function"==typeof n;if("style"===e&&"object"==typeof n)!function(t,e,n){var i=m(t);if("object"==typeof e)for(var o in e)s(i,o,e[o]);else s(i,e,n)}(o,n);else if(l&&a)o[e]=n;else if("dataset"===e)d(o,n);else if(l||!(e in o)&&!a||"list"===e){if(l&&"xlink"===e)return void f(o,n);i&&"class"===e&&(n=o.className+" "+n),null==n?o.removeAttribute(e):o.setAttribute(e,n)}else o[e]=n}}function f(t,e,n){if("object"==typeof e)for(var i in e)f(t,i,e[i]);else null!=n?t.setAttributeNS(u,e,n):t.removeAttributeNS(u,e,n)}function d(t,e,n){if("object"==typeof e)for(var i in e)d(t,i,e[i]);else null!=n?t.dataset[e]=n:delete t.dataset[e]}function v(t){return document.createTextNode(null!=t?t:"")}function h(t,e,n){for(var i=0,o=e;i<o.length;i+=1){var r=o[i];if(0===r||r){var a=typeof r;"function"===a?r(t):"string"===a||"number"===a?t.appendChild(v(r)):_(m(r))?l(t,r):r.length?h(t,r,n):"object"===a&&c(t,r,null,n)}}}function p(t){return"string"==typeof t?g(t):m(t)}function m(t){return t.nodeType&&t||!t.el&&t||m(t.el)}function _(t){return t&&t.nodeType}function g(e){for(var n,i=[],o=arguments.length-1;o-- >0;)i[o]=arguments[o+1];var r=typeof e;if("string"===r)n=t(e);else{if("function"!==r)throw new Error("At least one argument required");var l=e;n=new(Function.prototype.bind.apply(l,[null].concat(i)))}return h(m(n),i,!0),n}var w=g;function y(t){for(var n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];for(var o=m(t),r=b(t,n,o.firstChild);r;){var l=r.nextSibling;e(t,r),r=l}}function b(t,e,n){for(var i=n,o=Array(e.length),r=0;r<e.length;r++)o[r]=e[r]&&m(e[r]);for(var a=0;a<e.length;a++){var s=e[a];if(s){var u=o[a];if(u!==i)if(_(u)){var c=i&&i.nextSibling,f=null!=s.__redom_index&&c===o[a+1];l(t,s,i,f),f&&(i=c)}else null!=s.length&&(i=b(t,s,i));else i=i.nextSibling}}return i}g.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return g.bind.apply(g,[this].concat(t))};var S=function(t,e,n){this.View=t,this.initData=n,this.oldLookup={},this.lookup={},this.oldViews=[],this.views=[],null!=e&&(this.key="function"==typeof e?e:function(t){return function(e){return e[t]}}(e))};S.prototype.update=function(t,e){for(var n=this,i=n.View,o=n.key,r=n.initData,l=null!=o,a=this.lookup,s={},u=Array(t.length),c=this.views,f=0;f<t.length;f++){var d=t[f],v=void 0;if(l){var h=o(d);v=a[h]||new i(r,d,f,t),s[h]=v,v.__redom_id=h}else v=c[f]||new i(r,d,f,t);v.update&&v.update(d,f,t,e),m(v.el).__redom_view=v,u[f]=v}this.oldViews=c,this.views=u,this.oldLookup=a,this.lookup=s};var N=function(t,e,n,i){this.View=e,this.initData=i,this.views=[],this.pool=new S(e,n,i),this.el=p(t),this.keySet=null!=n};N.prototype.update=function(t,n){void 0===t&&(t=[]);var i=this.keySet,o=this.views;this.pool.update(t,n);var r=this.pool,l=r.views,a=r.lookup;if(i)for(var s=0;s<o.length;s++){var u=o[s];null==a[u.__redom_id]&&(u.__redom_index=null,e(this,u))}for(var c=0;c<l.length;c++){l[c].__redom_index=c}y(this,l),i&&(this.lookup=a),this.views=l},N.extend=function(t,e,n,i){return N.bind(N,t,e,n,i)},N.extend;var x=function(t,e){this.el=v(""),this.visible=!1,this.view=null,this._placeholder=this.el,t instanceof Node?this._el=t:t.el instanceof Node?(this._el=t,this.view=t):this._View=t,this._initData=e};x.prototype.update=function(t,n){var i=this._placeholder,o=this.el.parentNode;if(t){if(!this.visible)if(this._el)l(o,this._el,i),e(o,i),this.el=m(this._el),this.visible=t;else{var r=new(0,this._View)(this._initData);this.el=m(r),this.view=r,l(o,r,i),e(o,i)}this.view&&this.view.update&&this.view.update(n)}else if(this.visible){if(this._el)return l(o,i,this._el),e(o,this._el),this.el=i,void(this.visible=t);l(o,i,this.view),e(o,this.view),this.el=i,this.view=null}this.visible=t};var k=function(t,e,n){this.el=p(t),this.Views=e,this.initData=n};k.prototype.update=function(t,e){if(t!==this.route){var n=this.Views[t];this.route=t,n&&(n instanceof Node||n.el instanceof Node)?this.view=n:this.view=n&&new n(this.initData,e),y(this.el,[this.view])}this.view&&this.view.update&&this.view.update(e,t)};var E="http://www.w3.org/2000/svg";function D(e){for(var n,i=[],o=arguments.length-1;o-- >0;)i[o]=arguments[o+1];var r=typeof e;if("string"===r)n=t(e,E);else{if("function"!==r)throw new Error("At least one argument required");var l=e;n=new(Function.prototype.bind.apply(l,[null].concat(i)))}return h(m(n),i,!0),n}D.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return D.bind.apply(D,[this].concat(t))},D.ns=E;let V=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce(((t,e)=>t+=(e&=63)<36?e.toString(36):e<62?(e-26).toString(36).toUpperCase():e>62?"-":"_"),"");var A="tasks",I=function(){try{return localStorage.getItem(A)?JSON.parse(localStorage.getItem(A)):[]}catch(t){console.log(t)}},O=function(t,e){try{var n=JSON.parse(localStorage.getItem(A)),i=n.find((function(e){return e.id===t}));return i[e]=!i[e],localStorage.setItem(A,JSON.stringify(n)),!0}catch(t){console.log(t)}},C=w("ul.list-group.my-2"),J=function(){C.innerHTML="",I().filter((function(t){return t.importanted})).forEach((function(t){var e=M(t,!1);l(C,e)}))};J();var L=w("ul.list-group.col-md-7"),T=function(){L.innerHTML="",I().forEach((function(t){var e=M(t);l(L,e)}))};T();var j=w("ul.list-group.list-group-horizontal"),q=function(){var t=I(),e=t.filter((function(t){return t.importanted})),n=t.filter((function(t){return t.completed})),i=t.length-n.length;i<0&&(i=0),y(j,[w("li.list-group-item","left: ".concat(i)),w("li.list-group-item","important: ".concat(e.length)),w("li.list-group-item","completed: ".concat(n.length)),w("li.list-group-item","all: ".concat(t.length))])};function M(t){var e=t.text,n=t.id,i=t.completed,o=t.importanted,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],l="";o&&i||i?l="list-group-item-success":o&&(l="list-group-item-warning");var a="".concat(l," list-group-item list-group-item-action d-flex justify-content-between align-items-center");return w("li",{className:a},r?[e,R(n)]:e)}function R(t){var e=w("button.btn.btn-success",w("i.fa-sharp.fa-solid.fa-check",{style:{pointerEvents:"none"}}));e.addEventListener("click",(function(){O(t,"completed"),T(),J(),q()}));var n=w("button.btn.btn-warning",w("i.fa-regular.fa-star",{style:{pointerEvents:"none"}}));n.addEventListener("click",(function(){O(t,"importanted"),T(),J(),q()}));var i=w("button.btn.btn-danger",w("i.fa-solid.fa-trash",{style:{pointerEvents:"none"}}));return i.addEventListener("click",(function(){var e=function(t){try{var e=JSON.parse(localStorage.getItem(A)).filter((function(e){return e.id!==t}));return localStorage.setItem(A,JSON.stringify(e)),!0}catch(t){console.log(t)}}(t);e&&(T(),J(),q())})),w(".btn-group",[e,n,i])}q();var U=w("form",{style:{maxWidth:"600px"}},w(".input-group.mb-3",[w("input.form-control",{type:"text",placeholder:"input your task"}),w("button.input-group-text.btn-light",w("i.fa-solid.fa-plus"))]));U.addEventListener("submit",(function(t){t.preventDefault();var e=t.target[0],n=e.value;if(n){var i=function(t){try{var e={id:V(),text:t,completed:!1,importanted:!1,time:Date()},n=JSON.parse(localStorage.getItem(A));return n?localStorage.setItem(A,JSON.stringify(n.concat(e))):localStorage.setItem(A,JSON.stringify([e])),e}catch(t){console.log(t)}}(n);!function(t){var e=t.text,n=t.id;q(),l(L,M({text:e,id:n}))}(i),e.value=""}}));var F=w("nav.navbar.bg-info.mb-5.py-1",w(".container-fluid",[w("span.navbar-brand.mb-0.fs-2","Todolist"),j]));y(document.querySelector(".app"),[F,w(".container",[U,w(".row",[L,w(".col-md-5",[w("h2","Important tasks"),C])])])])})();